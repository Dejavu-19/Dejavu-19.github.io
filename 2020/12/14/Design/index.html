<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-loading-bar.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"dejavi-19.github.io","root":"/","scheme":"Mist","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":true,"color":"#222","save":"manual"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="OODDesign File search with Name and Extension API Design CD rental system 353. Design Snake Game✨123456789101112131415161718192021Given width &#x3D; 3, height &#x3D; 2, and food &#x3D; [[1,2],[0,1]].Snake snake &#x3D; ne">
<meta property="og:type" content="article">
<meta property="og:title" content="Design">
<meta property="og:url" content="https://dejavi-19.github.io/2020/12/14/Design/index.html">
<meta property="og:site_name" content="Dejavu&#39;s Notebook">
<meta property="og:description" content="OODDesign File search with Name and Extension API Design CD rental system 353. Design Snake Game✨123456789101112131415161718192021Given width &#x3D; 3, height &#x3D; 2, and food &#x3D; [[1,2],[0,1]].Snake snake &#x3D; ne">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://zxi.mytechroad.com/blog/wp-content/uploads/2017/09/146-ep50.png">
<meta property="og:image" content="https://leetcode.com/problems/insert-delete-getrandom-o1/Figures/380/structure2.png">
<meta property="article:published_time" content="2020-12-13T18:10:42.773Z">
<meta property="article:modified_time" content="2021-01-26T14:35:02.868Z">
<meta property="article:author" content="Dejavu">
<meta property="article:tag" content="200">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://zxi.mytechroad.com/blog/wp-content/uploads/2017/09/146-ep50.png">

<link rel="canonical" href="https://dejavi-19.github.io/2020/12/14/Design/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Design | Dejavu's Notebook</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>
	<a href="https://github.com/Dejavu-19" target="_blank" rel="noopener" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Dejavu's Notebook</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Alea iacta est</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首&emsp;&emsp;页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于博主</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标&emsp;&emsp;签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分&emsp;&emsp;类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归&emsp;&emsp;档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://dejavi-19.github.io/2020/12/14/Design/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/v2-f8df7dc974a522b119a385a0fc09311e_xll.jpg">
      <meta itemprop="name" content="Dejavu">
      <meta itemprop="description" content="Stay gold">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dejavu's Notebook">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Design
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-12-14 03:10:42" itemprop="dateCreated datePublished" datetime="2020-12-14T03:10:42+09:00">2020-12-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-01-26 23:35:02" itemprop="dateModified" datetime="2021-01-26T23:35:02+09:00">2021-01-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Leetcode/" itemprop="url" rel="index"><span itemprop="name">Leetcode</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="OOD"><a href="#OOD" class="headerlink" title="OOD"></a>OOD</h1><p>Design File search with Name and Extension API</p>
<p>Design CD rental system</p>
<h2 id="353-Design-Snake-Game✨"><a href="#353-Design-Snake-Game✨" class="headerlink" title="353. Design Snake Game✨"></a><a href="https://leetcode.com/problems/design-snake-game" target="_blank" rel="noopener">353. Design Snake Game✨</a></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">Given width = <span class="number">3</span>, height = <span class="number">2</span>, and food = [[<span class="number">1</span>,<span class="number">2</span>],[<span class="number">0</span>,<span class="number">1</span>]].</span><br><span class="line">Snake snake = <span class="keyword">new</span> Snake(width, height, food);</span><br><span class="line"><span class="function">Initially the snake appears at <span class="title">position</span> <span class="params">(<span class="number">0</span>,<span class="number">0</span>)</span> and the food <span class="title">at</span> <span class="params">(<span class="number">1</span>,<span class="number">2</span>)</span>.</span></span><br><span class="line"><span class="function">|S| | |</span></span><br><span class="line"><span class="function">| | |F|</span></span><br><span class="line"><span class="function">snake.<span class="title">move</span><span class="params">(<span class="string">"R"</span>)</span></span>; -&gt; Returns <span class="number">0</span></span><br><span class="line">| |S| |</span><br><span class="line">| | |F|</span><br><span class="line">snake.move(<span class="string">"D"</span>); -&gt; Returns <span class="number">0</span></span><br><span class="line">| | | |</span><br><span class="line">| |S|F|</span><br><span class="line">snake.move(<span class="string">"R"</span>); -&gt; Returns <span class="number">1</span> (Snake eats the first food and right after that, <span class="function">the second food appears <span class="title">at</span> <span class="params">(<span class="number">0</span>,<span class="number">1</span>)</span> )</span></span><br><span class="line"><span class="function">| |F| |</span></span><br><span class="line"><span class="function">| |S|S|</span></span><br><span class="line"><span class="function">snake.<span class="title">move</span><span class="params">(<span class="string">"U"</span>)</span></span>; -&gt; Returns <span class="number">1</span></span><br><span class="line">| |F|S|</span><br><span class="line">| | |S|</span><br><span class="line">snake.move(<span class="string">"L"</span>); -&gt; Returns <span class="number">2</span> (Snake eats the second food)</span><br><span class="line">| |S|S|</span><br><span class="line">| | |S|</span><br><span class="line">snake.move(<span class="string">"U"</span>); -&gt; Returns -<span class="number">1</span> (Game over because snake collides with border)</span><br></pre></td></tr></table></figure>



<h3 id="Solution1"><a href="#Solution1" class="headerlink" title="Solution1:"></a>Solution1:</h3><ol>
<li>思路：先搞清楚场景：初始状态；死亡状态；移动状态。然后设计主要动作（move）。二维图可以转为一维数组表示，用 Deque 保存蛇体，并用 Set 做索引，因为总是先进后出，且不会有重复数字（注意吃东西时会有 暂时的重复，些时需要先从 Set 中移除尾巴，如果没有问题且吃了东西，再把尾巴加回来。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SnakeGame</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2D position info is encoded to 1D and stored as two copies </span></span><br><span class="line">    Set&lt;Integer&gt; set; <span class="comment">// this copy is good for fast loop-up for eating body case</span></span><br><span class="line">    Deque&lt;Integer&gt; body; <span class="comment">// this copy is good for updating tail</span></span><br><span class="line">    <span class="keyword">int</span> score;</span><br><span class="line">    <span class="keyword">int</span>[][] food;</span><br><span class="line">    <span class="keyword">int</span> foodIndex;</span><br><span class="line">    <span class="keyword">int</span> width;</span><br><span class="line">    <span class="keyword">int</span> height;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SnakeGame</span><span class="params">(<span class="keyword">int</span> width, <span class="keyword">int</span> height, <span class="keyword">int</span>[][] food)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.width = width;</span><br><span class="line">        <span class="keyword">this</span>.height = height;</span><br><span class="line">        <span class="keyword">this</span>.food = food;</span><br><span class="line">        set = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">        set.add(<span class="number">0</span>); <span class="comment">//intially at [0][0]</span></span><br><span class="line">        body = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        body.offerLast(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">move</span><span class="params">(String direction)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//case 0: game already over: do nothing</span></span><br><span class="line">        <span class="keyword">if</span> (score == -<span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// compute new head</span></span><br><span class="line">        <span class="keyword">int</span> rowHead = body.peekFirst() / width;</span><br><span class="line">        <span class="keyword">int</span> colHead = body.peekFirst() % width;</span><br><span class="line">        <span class="keyword">switch</span> (direction) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"U"</span> : rowHead--;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"D"</span> : rowHead++;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"L"</span> : colHead--;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span> :  colHead++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> head = rowHead * width + colHead;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//case 1: out of boundary or eating body</span></span><br><span class="line">        set.remove(body.peekLast()); <span class="comment">// new head is legal to be in old tail's position, remove from set temporarily </span></span><br><span class="line">        <span class="keyword">if</span> (rowHead &lt; <span class="number">0</span> || rowHead == height || colHead &lt; <span class="number">0</span> || colHead == width || set.contains(head)) &#123;</span><br><span class="line">            <span class="keyword">return</span> score = -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// add head for case2 and case3</span></span><br><span class="line">        set.add(head); </span><br><span class="line">        body.offerFirst(head);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//case2: eating food, keep tail, add head</span></span><br><span class="line">        <span class="keyword">if</span> (foodIndex &lt; food.length &amp;&amp; rowHead == food[foodIndex][<span class="number">0</span>] &amp;&amp; colHead == food[foodIndex][<span class="number">1</span>]) &#123;</span><br><span class="line">            set.add(body.peekLast()); <span class="comment">// old tail does not change, so add it back to set</span></span><br><span class="line">            foodIndex++;</span><br><span class="line">            <span class="keyword">return</span> ++score;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//case3: normal move, remove tail, add head</span></span><br><span class="line">        body.pollLast();</span><br><span class="line">        <span class="keyword">return</span> score;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Unsolved-348-Design-Tic-Tac-Toe⭐"><a href="#Unsolved-348-Design-Tic-Tac-Toe⭐" class="headerlink" title="Unsolved 348. Design Tic-Tac-Toe⭐"></a><a href="https://leetcode.com/problems/design-tic-tac-toe/" target="_blank" rel="noopener">Unsolved 348. Design Tic-Tac-Toe⭐</a></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">Input</span><br><span class="line">[<span class="string">"TicTacToe"</span>, <span class="string">"move"</span>, <span class="string">"move"</span>, <span class="string">"move"</span>, <span class="string">"move"</span>, <span class="string">"move"</span>, <span class="string">"move"</span>, <span class="string">"move"</span>]</span><br><span class="line">[[<span class="number">3</span>], [<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>], [<span class="number">0</span>, <span class="number">2</span>, <span class="number">2</span>], [<span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>], [<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>], [<span class="number">2</span>, <span class="number">0</span>, <span class="number">1</span>], [<span class="number">1</span>, <span class="number">0</span>, <span class="number">2</span>], [<span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>]]</span><br><span class="line">Output</span><br><span class="line">[<span class="keyword">null</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">Explanation</span><br><span class="line">TicTacToe ticTacToe = <span class="keyword">new</span> TicTacToe(<span class="number">3</span>);</span><br><span class="line">Assume that player <span class="number">1</span> is <span class="string">"X"</span> and player <span class="number">2</span> is <span class="string">"O"</span> in the board.</span><br><span class="line">ticTacToe.move(<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>); <span class="comment">// return 0 (no one wins)</span></span><br><span class="line">|X| | |</span><br><span class="line">| | | |    <span class="comment">// Player 1 makes a move at (0, 0).</span></span><br><span class="line">| | | |</span><br><span class="line"></span><br><span class="line">ticTacToe.move(<span class="number">0</span>, <span class="number">2</span>, <span class="number">2</span>); <span class="comment">// return 0 (no one wins)</span></span><br><span class="line">|X| |O|</span><br><span class="line">| | | |    <span class="comment">// Player 2 makes a move at (0, 2).</span></span><br><span class="line">| | | |</span><br><span class="line"></span><br><span class="line">ticTacToe.move(<span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>); <span class="comment">// return 0 (no one wins)</span></span><br><span class="line">|X| |O|</span><br><span class="line">| | | |    <span class="comment">// Player 1 makes a move at (2, 2).</span></span><br><span class="line">| | |X|</span><br><span class="line"></span><br><span class="line">ticTacToe.move(<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>); <span class="comment">// return 0 (no one wins)</span></span><br><span class="line">|X| |O|</span><br><span class="line">| |O| |    <span class="comment">// Player 2 makes a move at (1, 1).</span></span><br><span class="line">| | |X|</span><br><span class="line"></span><br><span class="line">ticTacToe.move(<span class="number">2</span>, <span class="number">0</span>, <span class="number">1</span>); <span class="comment">// return 0 (no one wins)</span></span><br><span class="line">|X| |O|</span><br><span class="line">| |O| |    <span class="comment">// Player 1 makes a move at (2, 0).</span></span><br><span class="line">|X| |X|</span><br><span class="line"></span><br><span class="line">ticTacToe.move(<span class="number">1</span>, <span class="number">0</span>, <span class="number">2</span>); <span class="comment">// return 0 (no one wins)</span></span><br><span class="line">|X| |O|</span><br><span class="line">|O|O| |    <span class="comment">// Player 2 makes a move at (1, 0).</span></span><br><span class="line">|X| |X|</span><br><span class="line"></span><br><span class="line">ticTacToe.move(<span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>); <span class="comment">// return 1 (player 1 wins)</span></span><br><span class="line">|X| |O|</span><br><span class="line">|O|O| |    <span class="comment">// Player 1 makes a move at (2, 1).</span></span><br><span class="line">|X|X|X|</span><br></pre></td></tr></table></figure>

<h3 id="Solution0"><a href="#Solution0" class="headerlink" title="Solution0:"></a>Solution0:</h3><ol>
<li>brute force</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// O(n) solution</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TicTacToe</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span>[][] grid;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/** Initialize your data structure here. */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">TicTacToe</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        grid = <span class="keyword">new</span> <span class="keyword">int</span>[n][n];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/** Player &#123;player&#125; makes a move at (&#123;row&#125;, &#123;col&#125;).</span></span><br><span class="line"><span class="comment">        <span class="doctag">@param</span> row The row of the board.</span></span><br><span class="line"><span class="comment">        <span class="doctag">@param</span> col The column of the board.</span></span><br><span class="line"><span class="comment">        <span class="doctag">@param</span> player The player, can be either 1 or 2.</span></span><br><span class="line"><span class="comment">        <span class="doctag">@return</span> The current winning condition, can be either:</span></span><br><span class="line"><span class="comment">                0: No one wins.</span></span><br><span class="line"><span class="comment">                1: Player 1 wins.</span></span><br><span class="line"><span class="comment">                2: Player 2 wins. */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">move</span><span class="params">(<span class="keyword">int</span> row, <span class="keyword">int</span> col, <span class="keyword">int</span> player)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// validation TODO</span></span><br><span class="line">        <span class="keyword">if</span> (row &gt;= grid.length || col &gt;= grid.length) <span class="keyword">return</span> <span class="number">0</span>; <span class="comment">// out of the grid</span></span><br><span class="line">        <span class="keyword">if</span> (grid[row][col] != <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>; <span class="comment">// cell is used</span></span><br><span class="line">        </span><br><span class="line">        grid[row][col] = player == <span class="number">1</span> ? <span class="number">1</span> : <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span> (checkVerticallyWin(col, player)) <span class="keyword">return</span> player;</span><br><span class="line">        <span class="keyword">if</span> (checkHorizontallyWin(row, player)) <span class="keyword">return</span> player;</span><br><span class="line">        <span class="keyword">if</span> (checkDiagonallyWin(row, col, player)) <span class="keyword">return</span> player;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">checkVerticallyWin</span><span class="params">(<span class="keyword">int</span> col, <span class="keyword">int</span> player)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; grid.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (grid[i][col] != player) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">checkHorizontallyWin</span><span class="params">(<span class="keyword">int</span> row, <span class="keyword">int</span> player)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; grid[<span class="number">0</span>].length; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (grid[row][j] != player) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">checkDiagonallyWin</span><span class="params">(<span class="keyword">int</span> row, <span class="keyword">int</span> col, <span class="keyword">int</span> player)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (row != col &amp;&amp; row+col != grid.length-<span class="number">1</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">boolean</span> topLeftToBottomRight = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">boolean</span> topRightToBottomLeft = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; grid.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (grid[i][i] != player) topLeftToBottomRight = <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; grid.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (grid[i][grid.length-<span class="number">1</span>-i] != player) topRightToBottomLeft = <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> topRightToBottomLeft || topLeftToBottomRight;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// TC: O(n)</span></span><br><span class="line"><span class="comment">// AS: O(n^2)</span></span><br></pre></td></tr></table></figure>

<h3 id="Solution1-1"><a href="#Solution1-1" class="headerlink" title="Solution1:"></a>Solution1:</h3><ol>
<li>与 n 后问题思路一致，重点在判断横、竖、斜四个方向上是否已经达到指定数量的相应棋子。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TicTacToe</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[] rows;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[] cols;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> diagonal;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> antiDiagonal;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Initialize your data structure here. */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">TicTacToe</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        rows = <span class="keyword">new</span> <span class="keyword">int</span>[n];</span><br><span class="line">        cols = <span class="keyword">new</span> <span class="keyword">int</span>[n];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/** Player &#123;player&#125; makes a move at (&#123;row&#125;, &#123;col&#125;).</span></span><br><span class="line"><span class="comment">        <span class="doctag">@param</span> row The row of the board.</span></span><br><span class="line"><span class="comment">        <span class="doctag">@param</span> col The column of the board.</span></span><br><span class="line"><span class="comment">        <span class="doctag">@param</span> player The player, can be either 1 or 2.</span></span><br><span class="line"><span class="comment">        <span class="doctag">@return</span> The current winning condition, can be either:</span></span><br><span class="line"><span class="comment">                0: No one wins.</span></span><br><span class="line"><span class="comment">                1: Player 1 wins.</span></span><br><span class="line"><span class="comment">                2: Player 2 wins. */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">move</span><span class="params">(<span class="keyword">int</span> row, <span class="keyword">int</span> col, <span class="keyword">int</span> player)</span> </span>&#123;</span><br><span class="line">         <span class="comment">/* player 1 is 1, player 2 is -1 */</span></span><br><span class="line">        <span class="keyword">int</span> toAdd = player == <span class="number">1</span>? <span class="number">1</span> : -<span class="number">1</span>;</span><br><span class="line">        <span class="comment">/* update the current move onto the corresponding row and column */</span></span><br><span class="line">        rows[row] += toAdd;</span><br><span class="line">        cols[col] += toAdd;</span><br><span class="line">        <span class="keyword">if</span> (row == col) &#123;</span><br><span class="line">            diagonal += toAdd;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (col == (cols.length - row - <span class="number">1</span>)) &#123;</span><br><span class="line">            antiDiagonal += toAdd;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/* when sum of the current certain row or column is n or -n</span></span><br><span class="line"><span class="comment">            we know a player has won */</span></span><br><span class="line">        <span class="keyword">int</span> size = rows.length;</span><br><span class="line">        <span class="keyword">if</span> (Math.abs(rows[row]) == size </span><br><span class="line">            || Math.abs(cols[col]) == size </span><br><span class="line">            || Math.abs(diagonal) == size</span><br><span class="line">            || Math.abs(antiDiagonal) == size) &#123;</span><br><span class="line">            <span class="keyword">return</span> player;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Unsolved-LRU-Cache-AE-⭐"><a href="#Unsolved-LRU-Cache-AE-⭐" class="headerlink" title="Unsolved LRU Cache(AE)⭐"></a>Unsolved LRU Cache(AE)⭐</h2><p><img src="https://zxi.mytechroad.com/blog/wp-content/uploads/2017/09/146-ep50.png" alt=""></p>
<p>DoublyLinkedList (track sequence) + Hashtable (access value)</p>
<h3 id="Solution1-2"><a href="#Solution1-2" class="headerlink" title="Solution1:"></a>Solution1:</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">LRUCache</span> </span>&#123;</span><br><span class="line">    Map&lt;String, DoublyLinkedlistNode&gt; cache = <span class="keyword">new</span> HashMap&lt;String, DoublyLinkedListNode&gt;;</span><br><span class="line">    <span class="keyword">int</span> maxSize;</span><br><span class="line">    <span class="keyword">int</span> currentSize;</span><br><span class="line">    DoublyLinkedlistNode listOfMostRecent = <span class="keyword">new</span> DoublyLinkedlistNode;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LRUCache</span><span class="params">(<span class="keyword">int</span> maxSize)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.maxSize = maxSize &gt; <span class="number">1</span> ? maxSize : <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insertKeyValuePair</span><span class="params">(String key, <span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Write your code here.</span></span><br><span class="line">    <span class="keyword">if</span> (!cache.contasinsKey(key) &#123;</span><br><span class="line">    <span class="keyword">if</span> (currentSize == maxSize) &#123;</span><br><span class="line">    	evictLeastRecent();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	    currentSize++;</span><br><span class="line">    &#125;</span><br><span class="line">    cache.put(key, <span class="keyword">new</span> DoublyLinkedListNode(key, value);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	    replaceKey(key, value);</span><br><span class="line">    &#125;</span><br><span class="line">    undateMostRecent(cache.get(key));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> LRUResult <span class="title">getValueFromKey</span><span class="params">(String key)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Write your code here.</span></span><br><span class="line">    <span class="keyword">if</span> (!cache.containsKey(key)) &#123;</span><br><span class="line">    	<span class="keyword">return</span> <span class="keyword">new</span> LRUResult(<span class="keyword">false</span>, -<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    updateMostRecent(cache.get(key));</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> LRUResult(<span class="keyword">true</span>, cache.get(key).value);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getMostRecentKey</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Write your code here.</span></span><br><span class="line">    <span class="keyword">if</span> (listOfMostRecent.head == <span class="keyword">null</span>) &#123;</span><br><span class="line">	    <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> listOfMostRecent.head.key;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">evictLeastRecent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    String keyToRemove = listOfMostRecent.tail.key;</span><br><span class="line">    listOfMostRecent.removeTail();</span><br><span class="line">    cache.remove(keyToMove);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateMostRecent</span><span class="params">(DoublyLinkedListNode node)</span> </span>&#123;</span><br><span class="line">	listOfMostRecent.setHeadTo(node);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">replaceKey</span><span class="params">(String key, <span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">this</span>.cache.containsKey(key)) &#123;</span><br><span class="line">	    <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    cache.get(key).value = value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">DoublyLinkedList</span> </span>&#123;</span><br><span class="line">    DoublyLinkedListNode head = <span class="keyword">null</span>;</span><br><span class="line">    DoublyLinkedListNode tail = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setHeadTo</span><span class="params">(DoublyLinkedListNode node)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (head == node) &#123;</span><br><span class="line">	        <span class="keyword">return</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (head == <span class="keyword">null</span>) &#123;</span><br><span class="line">            head = node;</span><br><span class="line">            tail = node;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (head == tail) &#123;</span><br><span class="line">            tail.prev = node;</span><br><span class="line">            head = node;</span><br><span class="line">            head.next = tail;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (tail == node) &#123;</span><br><span class="line">            removeTail();</span><br><span class="line">        &#125;</span><br><span class="line">        node.removeBindings();</span><br><span class="line">        head.prev = node;</span><br><span class="line">        node.next = head;</span><br><span class="line">        head = node;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">removeTail</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (tail == <span class="keyword">null</span>) &#123;</span><br><span class="line">	        <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (tail == head) &#123;</span><br><span class="line">            head = <span class="keyword">null</span>;</span><br><span class="line">            tail = <span class="keyword">null</span>;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        tail = tail.prev;</span><br><span class="line">        tail.next = <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> calss <span class="title">DoublyLinkedListNode</span><span class="params">(String key, <span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">        String key;</span><br><span class="line">        <span class="keyword">int</span> value;</span><br><span class="line">        DoublyLinkedListNode prev = <span class="keyword">null</span>;</span><br><span class="line">        DoublyLinkedListNode next = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">DoublyLinkedListNode</span><span class="params">(String key, <span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.key = key;</span><br><span class="line">            <span class="keyword">this</span>.value = value;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">removeBindings</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (prev != <span class="keyword">null</span>) &#123;</span><br><span class="line">            	prev.next = next;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (next != <span class="keyword">null</span>) &#123;</span><br><span class="line">	            next.prev = prev;</span><br><span class="line">            &#125;</span><br><span class="line">            prev = <span class="keyword">null</span>;</span><br><span class="line">            next = <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">LRUResult</span> </span>&#123;</span><br><span class="line">    <span class="keyword">boolean</span> found;</span><br><span class="line">    <span class="keyword">int</span> value;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LRUResult</span><span class="params">(<span class="keyword">boolean</span> found, <span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">    	<span class="keyword">this</span>.found = found;</span><br><span class="line">	    <span class="keyword">this</span>.value = value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="146-LRU-Cache✨"><a href="#146-LRU-Cache✨" class="headerlink" title="146. LRU Cache✨"></a><a href="https://leetcode.com/problems/lru-cache/" target="_blank" rel="noopener">146. LRU Cache✨</a></h3><p>Design and implement a data structure for <a href="https://en.wikipedia.org/wiki/Cache_replacement_policies#LRU" target="_blank" rel="noopener">Least Recently Used (LRU) cache</a>. It should support the following operations: get and put</p>
<h3 id="Solution1-3"><a href="#Solution1-3" class="headerlink" title="Solution1:"></a>Solution1:</h3><ol>
<li><p>思路：利用LinkedHashMap的移除最老元素。</p>
</li>
<li><p>如果不能用该数据结构，可使用双链表+HashMap(key-&gt;node)相结 合的方式。</p>
</li>
<li><p>每次put中get时，同时把相应词移动（或添加）到队尾，并且把原来位置的前后两元素相联。</p>
</li>
<li><p>The problem can be solved with a hashtable that keeps track of the keys and its values in the double linked list. One interesting property about double linked list is that the node can remove itself without other reference. In addition, it takes constant time to add and remove nodes from the head or tail.</p>
</li>
<li><p>One particularity about the double linked list that I implemented is that I create a pseudo head and tail to mark the boundary, so that we don’t need to check the NULL node during the update. This makes the code more concise and clean, and also it is good for the performance.</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> value;</span><br><span class="line">    <span class="keyword">int</span> key;</span><br><span class="line">    Node prev;</span><br><span class="line">    Node next;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Node</span><span class="params">(<span class="keyword">int</span> key, <span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.key = key;</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">        <span class="keyword">this</span>.prev = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">this</span>.next = <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DoublyLinkedList</span> </span>&#123;</span><br><span class="line">    Node head;</span><br><span class="line">    Node tail;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DoublyLinkedList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        head = <span class="keyword">new</span> Node();</span><br><span class="line">        tail = <span class="keyword">new</span> Node();</span><br><span class="line">        <span class="keyword">this</span>.head.next = <span class="keyword">this</span>.tail;</span><br><span class="line">        <span class="keyword">this</span>.tail.prev = head;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insertHead</span><span class="params">(Node n)</span> </span>&#123;</span><br><span class="line">        n.prev = head;</span><br><span class="line">        n.next = head.next;</span><br><span class="line">        head.next.prev = n;</span><br><span class="line">        head.next = n;    </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">(Node n)</span> </span>&#123;</span><br><span class="line">        n.prev.next = n.next;</span><br><span class="line">        n.next.prev = n.prev;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">removeTail</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Node n = tail.prev;</span><br><span class="line">        <span class="keyword">int</span> key = n.key;</span><br><span class="line">        remove(n);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> key;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LRUCache</span> </span>&#123;</span><br><span class="line">    Map&lt;Integer, Node&gt; cache;</span><br><span class="line">    DoublyLinkedList list;</span><br><span class="line">    <span class="keyword">int</span> capacity;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LRUCache</span><span class="params">(<span class="keyword">int</span> capacity)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.capacity = capacity;</span><br><span class="line">        <span class="keyword">this</span>.cache = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">this</span>.list = <span class="keyword">new</span> DoublyLinkedList();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">get</span><span class="params">(<span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!cache.containsKey(key)) </span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;    </span><br><span class="line">        update(key, cache.get(key));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> cache.get(key).value;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> key, Node n)</span> </span>&#123;    </span><br><span class="line">        list.remove(n);</span><br><span class="line">        list.insertHead(n);</span><br><span class="line">        cache.put(key, n);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(<span class="keyword">int</span> key, <span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">        Node n = <span class="keyword">new</span> Node(key, value);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (cache.containsKey(key))</span><br><span class="line">            list.remove(cache.get(key));</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (cache.size() &gt;= capacity) &#123;</span><br><span class="line">            <span class="keyword">int</span> k = list.removeTail();</span><br><span class="line">            cache.remove(k);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        list.insertHead(n);</span><br><span class="line">        cache.put(key, n);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Hashtable;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LRUCache</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">DLinkedNode</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> key;</span><br><span class="line">        <span class="keyword">int</span> value;</span><br><span class="line">        DLinkedNode pre;</span><br><span class="line">        DLinkedNode post;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Always add the new node right after head;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">addNode</span><span class="params">(DLinkedNode node)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        node.pre = head;</span><br><span class="line">        node.post = head.post;</span><br><span class="line"></span><br><span class="line">        head.post.pre = node;</span><br><span class="line">        head.post = node;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Remove an existing node from the linked list.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">removeNode</span><span class="params">(DLinkedNode node)</span></span>&#123;</span><br><span class="line">        DLinkedNode pre = node.pre;</span><br><span class="line">        DLinkedNode post = node.post;</span><br><span class="line"></span><br><span class="line">        pre.post = post;</span><br><span class="line">        post.pre = pre;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Move certain node in between to the head.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">moveToHead</span><span class="params">(DLinkedNode node)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.removeNode(node);</span><br><span class="line">        <span class="keyword">this</span>.addNode(node);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// pop the current tail. </span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> DLinkedNode <span class="title">popTail</span><span class="params">()</span></span>&#123;</span><br><span class="line">        DLinkedNode res = tail.pre;</span><br><span class="line">        <span class="keyword">this</span>.removeNode(res);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Hashtable&lt;Integer, DLinkedNode&gt; </span><br><span class="line">        cache = <span class="keyword">new</span> Hashtable&lt;Integer, DLinkedNode&gt;();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> count;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> capacity;</span><br><span class="line">    <span class="keyword">private</span> DLinkedNode head, tail;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LRUCache</span><span class="params">(<span class="keyword">int</span> capacity)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">this</span>.capacity = capacity;</span><br><span class="line"></span><br><span class="line">        head = <span class="keyword">new</span> DLinkedNode();</span><br><span class="line">        head.pre = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        tail = <span class="keyword">new</span> DLinkedNode();</span><br><span class="line">        tail.post = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        head.post = tail;</span><br><span class="line">        tail.pre = head;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">get</span><span class="params">(<span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        DLinkedNode node = cache.get(key);</span><br><span class="line">        <span class="keyword">if</span>(node == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>; <span class="comment">// should raise exception here.</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// move the accessed node to the head;</span></span><br><span class="line">        <span class="keyword">this</span>.moveToHead(node);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> node.value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(<span class="keyword">int</span> key, <span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">        DLinkedNode node = cache.get(key);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(node == <span class="keyword">null</span>)&#123;</span><br><span class="line"></span><br><span class="line">            DLinkedNode newNode = <span class="keyword">new</span> DLinkedNode();</span><br><span class="line">            newNode.key = key;</span><br><span class="line">            newNode.value = value;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">this</span>.cache.put(key, newNode);</span><br><span class="line">            <span class="keyword">this</span>.addNode(newNode);</span><br><span class="line"></span><br><span class="line">            ++count;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(count &gt; capacity)&#123;</span><br><span class="line">                <span class="comment">// pop the tail</span></span><br><span class="line">                DLinkedNode tail = <span class="keyword">this</span>.popTail();</span><br><span class="line">                <span class="keyword">this</span>.cache.remove(tail.key);</span><br><span class="line">                --count;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">// update the value.</span></span><br><span class="line">            node.value = value;</span><br><span class="line">            <span class="keyword">this</span>.moveToHead(node);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Unsolved-460-LFU-Cache⭐"><a href="#Unsolved-460-LFU-Cache⭐" class="headerlink" title="Unsolved 460. LFU Cache⭐"></a><a href="https://leetcode.com/problems/lfu-cache/" target="_blank" rel="noopener">Unsolved 460. LFU Cache⭐</a></h2><p><a href="https://leetcode.com/problems/lfu-cache/discuss/94547/Java-O(1)-Solution-Using-Two-HashMap-and-One-DoubleLinkedList" target="_blank" rel="noopener">https://leetcode.com/problems/lfu-cache/discuss/94547/Java-O(1)-Solution-Using-Two-HashMap-and-One-DoubleLinkedList</a></p>
<p><a href="https://leetcode.com/problems/lfu-cache/discuss/94521/JAVA-O(1)-very-easy-solution-using-3-HashMaps-and-LinkedHashSet" target="_blank" rel="noopener">https://leetcode.com/problems/lfu-cache/discuss/94521/JAVA-O(1)-very-easy-solution-using-3-HashMaps-and-LinkedHashSet</a></p>
<p><a href="https://leetcode.com/problems/lfu-cache/discuss/207673/Python-concise-solution-**detailed**-explanation%3A-Two-dict-%2B-Doubly-linked-list" target="_blank" rel="noopener">https://leetcode.com/problems/lfu-cache/discuss/207673/Python-concise-solution-**detailed**-explanation%3A-Two-dict-%2B-Doubly-linked-list</a></p>
<h2 id="Unsolved-706-Design-HashMap✨"><a href="#Unsolved-706-Design-HashMap✨" class="headerlink" title="Unsolved 706. Design HashMap✨"></a><a href="https://leetcode.com/problems/design-hashmap/" target="_blank" rel="noopener">Unsolved 706. Design HashMap✨</a></h2><h3 id="Solution1-4"><a href="#Solution1-4" class="headerlink" title="Solution1:"></a>Solution1:</h3><ol>
<li><p>Some of the questions which can be asked to the interviewer before implementing the solution</p>
<p>For simplicity, are the keys integers only?<br>For collision resolution, can we use chaining?<br>Do we have to worry about load factors?<br>Can we assume inputs are valid or do we have to validate them?<br>Can we assume this fits memory?</p>
</li>
<li><p>Collisions are resolved using linked list</p>
</li>
</ol>
<p><a href="https://leetcode.com/problems/design-hashmap/solution/" target="_blank" rel="noopener">https://leetcode.com/problems/design-hashmap/solution/</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyHashMap</span> </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> ListNode[] nodes = <span class="keyword">new</span> ListNode[<span class="number">10000</span>];</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(<span class="keyword">int</span> key, <span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = idx(key);</span><br><span class="line">        <span class="keyword">if</span> (nodes[i] == <span class="keyword">null</span>)</span><br><span class="line">            nodes[i] = <span class="keyword">new</span> ListNode(-<span class="number">1</span>, -<span class="number">1</span>);</span><br><span class="line">        ListNode prev = find(nodes[i], key);</span><br><span class="line">        <span class="keyword">if</span> (prev.next == <span class="keyword">null</span>)</span><br><span class="line">            prev.next = <span class="keyword">new</span> ListNode(key, value);</span><br><span class="line">        <span class="keyword">else</span> prev.next.val = value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">get</span><span class="params">(<span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = idx(key);</span><br><span class="line">        <span class="keyword">if</span> (nodes[i] == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        ListNode node = find(nodes[i], key);</span><br><span class="line">        <span class="keyword">return</span> node.next == <span class="keyword">null</span> ? -<span class="number">1</span> : node.next.val;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">(<span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = idx(key);</span><br><span class="line">        <span class="keyword">if</span> (nodes[i] == <span class="keyword">null</span>) <span class="keyword">return</span>;</span><br><span class="line">        ListNode prev = find(nodes[i], key);</span><br><span class="line">        <span class="keyword">if</span> (prev.next == <span class="keyword">null</span>) <span class="keyword">return</span>;</span><br><span class="line">        prev.next = prev.next.next;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">idx</span><span class="params">(<span class="keyword">int</span> key)</span> </span>&#123; <span class="keyword">return</span> Integer.hashCode(key) % nodes.length;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">ListNode <span class="title">find</span><span class="params">(ListNode bucket, <span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">        ListNode node = bucket, prev = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">while</span> (node != <span class="keyword">null</span> &amp;&amp; node.key != key) &#123;</span><br><span class="line">            prev = node;</span><br><span class="line">            node = node.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> prev;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">ListNode</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> key, val;</span><br><span class="line">        ListNode next;</span><br><span class="line"></span><br><span class="line">        ListNode(<span class="keyword">int</span> key, <span class="keyword">int</span> val) &#123;</span><br><span class="line">            <span class="keyword">this</span>.key = key;</span><br><span class="line">            <span class="keyword">this</span>.val = val;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="380-Insert-Delete-GetRandom-O-1-⭐"><a href="#380-Insert-Delete-GetRandom-O-1-⭐" class="headerlink" title="380. Insert Delete GetRandom O(1)⭐"></a><a href="https://leetcode.com/problems/insert-delete-getrandom-o1/" target="_blank" rel="noopener">380. Insert Delete GetRandom O(1)⭐</a></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Input</span><br><span class="line">[<span class="string">"RandomizedSet"</span>, <span class="string">"insert"</span>, <span class="string">"remove"</span>, <span class="string">"insert"</span>, <span class="string">"getRandom"</span>, <span class="string">"remove"</span>, <span class="string">"insert"</span>, <span class="string">"getRandom"</span>]</span><br><span class="line">[[], [<span class="number">1</span>], [<span class="number">2</span>], [<span class="number">2</span>], [], [<span class="number">1</span>], [<span class="number">2</span>], []]</span><br><span class="line">Output</span><br><span class="line">[<span class="keyword">null</span>, <span class="keyword">true</span>, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="number">2</span>, <span class="keyword">true</span>, <span class="keyword">false</span>, <span class="number">2</span>]</span><br><span class="line"></span><br><span class="line">Explanation</span><br><span class="line">RandomizedSet randomizedSet = <span class="keyword">new</span> RandomizedSet();</span><br><span class="line">randomizedSet.insert(<span class="number">1</span>); <span class="comment">// Inserts 1 to the set. Returns true as 1 was inserted successfully.</span></span><br><span class="line">randomizedSet.remove(<span class="number">2</span>); <span class="comment">// Returns false as 2 does not exist in the set.</span></span><br><span class="line">randomizedSet.insert(<span class="number">2</span>); <span class="comment">// Inserts 2 to the set, returns true. Set now contains [1,2].</span></span><br><span class="line">randomizedSet.getRandom(); <span class="comment">// getRandom() should return either 1 or 2 randomly.</span></span><br><span class="line">randomizedSet.remove(<span class="number">1</span>); <span class="comment">// Removes 1 from the set, returns true. Set now contains [2].</span></span><br><span class="line">randomizedSet.insert(<span class="number">2</span>); <span class="comment">// 2 was already in the set, so return false.</span></span><br><span class="line">randomizedSet.getRandom(); <span class="comment">// Since 2 is the only number in the set, getRandom() will always return 2.</span></span><br></pre></td></tr></table></figure>

<h3 id="Solution1-5"><a href="#Solution1-5" class="headerlink" title="Solution1:"></a>Solution1:</h3><ol>
<li><p>HashMap + ArrayList <a href="https://leetcode.com/problems/insert-delete-getrandom-o1/solution/" target="_blank" rel="noopener">Expalanation</a></p>
</li>
<li><p>implement the structure which provides the following operations in <em>average</em> \mathcal{O}(1)O(1) time:</p>
<ul>
<li>Insert</li>
<li>Delete</li>
<li>GetRandom</li>
</ul>
</li>
<li><p>Hashmap provides Insert and Delete in average constant time, although has problems with GetRandom.</p>
</li>
<li><p>Array List has indexes and could provide Insert and GetRandom in average constant time, though has problems with Delete.</p>
</li>
<li><p>To delete a value at arbitrary index takes linear time. The solution here is to always delete the last value:</p>
<ul>
<li>Swap the element to delete with the last one.</li>
<li>Pop the last element out.</li>
</ul>
<p>For that, one has to compute an index of each element in constant time, and hence needs a hashmap which stores <code>element -&gt; its index</code> dictionary.</p>
<p>Both ways converge into the same combination of data structures:</p>
<ul>
<li>Hashmap <code>element -&gt; its index</code>.</li>
<li>Array List of elements.</li>
</ul>
</li>
</ol>
<p><img src="https://leetcode.com/problems/insert-delete-getrandom-o1/Figures/380/structure2.png" alt=""></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RandomizedSet</span> </span>&#123;</span><br><span class="line">    Map&lt;Integer, Integer&gt; map;</span><br><span class="line">    List&lt;Integer&gt; list;</span><br><span class="line">    Random rand;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Initialize your data structure here. */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">RandomizedSet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        rand = <span class="keyword">new</span> Random();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Inserts a value to the set. Returns true if the set did not already contain the specified element. */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">insert</span><span class="params">(<span class="keyword">int</span> val)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (map.containsKey(val)) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        map.put(val, list.size());</span><br><span class="line">        list.add(val);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Removes a value from the set. Returns true if the set contained the specified element. */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">remove</span><span class="params">(<span class="keyword">int</span> val)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!map.containsKey(val)) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> last = list.get(list.size() - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">int</span> idx = map.get(val);</span><br><span class="line">        list.set(idx, last);</span><br><span class="line">        map.put(last, idx);</span><br><span class="line">        list.remove(list.size() - <span class="number">1</span>);</span><br><span class="line">        map.remove(val);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Get a random element from the set. */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getRandom</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> list.get(rand.nextInt(list.size()));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Randomlization"><a href="#Randomlization" class="headerlink" title="Randomlization"></a>Randomlization</h3><h3 id="Unsolved-519-Random-Flip-Matrix🎂"><a href="#Unsolved-519-Random-Flip-Matrix🎂" class="headerlink" title="Unsolved 519. Random Flip Matrix🎂"></a><a href="https://leetcode.com/problems/random-flip-matrix/" target="_blank" rel="noopener">Unsolved 519. Random Flip Matrix🎂</a></h3><h3 id="Solution1-6"><a href="#Solution1-6" class="headerlink" title="Solution1:"></a>Solution1:</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;Integer, Integer&gt; map;</span><br><span class="line"><span class="keyword">int</span> m, n, total;</span><br><span class="line">Random rand;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Solution</span><span class="params">(<span class="keyword">int</span> n_rows, <span class="keyword">int</span> n_cols)</span> </span>&#123;</span><br><span class="line">    map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    rand = <span class="keyword">new</span> Random();</span><br><span class="line">    m = n_rows;</span><br><span class="line">    n = n_cols;</span><br><span class="line">    reset();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">int</span>[] flip() &#123;</span><br><span class="line">    <span class="keyword">int</span> i = rand.nextInt(total--);</span><br><span class="line">    <span class="keyword">int</span> x = map.getOrDefault(i, i);</span><br><span class="line">    map.put(i, map.getOrDefault(total, total));</span><br><span class="line">    map.put(total, x);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;x / n, x % n&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">reset</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    total = m * n;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="382-Linked-List-Random-Node✨"><a href="#382-Linked-List-Random-Node✨" class="headerlink" title="382. Linked List Random Node✨"></a><a href="https://leetcode.com/problems/linked-list-random-node/" target="_blank" rel="noopener">382. Linked List Random Node✨</a></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 两种生成对象方式：带种子和不带种子(两种方式的区别见注解)</span></span><br><span class="line">Random random = <span class="keyword">new</span> Random();</span><br><span class="line">Integer res = random.nextInt(n);</span><br><span class="line"></span><br><span class="line">Integer res = (<span class="keyword">int</span>)(Math.random() * n);</span><br><span class="line"></span><br><span class="line">random.nextInt() 为 java.util.Random类中的方法；</span><br><span class="line">Math.random() 为 java.lang.Math 类中的静态方法。</span><br><span class="line">Math.random() 方法生成[<span class="number">0</span>, <span class="number">1</span>)范围内的<span class="keyword">double</span>类型随机数；Random类中的nextXxxx系列方法生成<span class="number">0</span>－n的随机数；</span><br><span class="line">Math.random() 线程安全，多线程环境能被调用；</span><br><span class="line">如无特殊需求，则使用(<span class="keyword">int</span>)(Math.random()*n)的方式生成随机数即可。</span><br></pre></td></tr></table></figure>

<h3 id="Solution1-7"><a href="#Solution1-7" class="headerlink" title="Solution1:"></a>Solution1:</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> ArrayList&lt;Integer&gt; range = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line"><span class="comment">/** <span class="doctag">@param</span> head The linked list's head.</span></span><br><span class="line"><span class="comment">        Note that the head is guaranteed to be not null, so it contains at least one node. */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Solution</span><span class="params">(ListNode head)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (head != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.range.add(head.val);</span><br><span class="line">        head = head.next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** Returns a random node's value. */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getRandom</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> pick = (<span class="keyword">int</span>) (Math.random() * range.size());</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.range.get(pick);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Solution2"><a href="#Solution2" class="headerlink" title="Solution2:"></a>Solution2:</h3><ol>
<li>思路：蓄水池。可以证明，第 i 个数，如果随机数&lt;1/i，则为解。这里我们用&lt;=1/(1+i)。</li>
<li><a href="https://leetcode.com/problems/linked-list-random-node/discuss/85659/Brief-explanation-for-Reservoir-Sampling" target="_blank" rel="noopener">详解</a></li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">ListNode head = <span class="keyword">null</span>;</span><br><span class="line">Random r = <span class="keyword">new</span> Random();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Solution</span><span class="params">(ListNode head)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.head = head;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getRandom</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> result = <span class="keyword">this</span>.head.val;</span><br><span class="line">    ListNode node = <span class="keyword">this</span>.head.next;</span><br><span class="line">    <span class="keyword">int</span> k = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (node != <span class="keyword">null</span>) &#123;</span><br><span class="line">        dou ble x = r.nextDouble();</span><br><span class="line">        <span class="keyword">double</span> y = k / (k + i * <span class="number">1.0</span>);</span><br><span class="line">        <span class="keyword">if</span> (x &lt;= y)</span><br><span class="line">            result = node.val;</span><br><span class="line">        i++;</span><br><span class="line">        node = node.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="588-Design-In-Memory-File-System⭐"><a href="#588-Design-In-Memory-File-System⭐" class="headerlink" title="588. Design In-Memory File System⭐"></a><a href="https://leetcode.com/problems/design-in-memory-file-system/" target="_blank" rel="noopener">588. Design In-Memory File System⭐</a></h2><h3 id="Solution1-8"><a href="#Solution1-8" class="headerlink" title="Solution1:"></a>Solution1:</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileSystem</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> FileNode root;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">FileSystem</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        root = <span class="keyword">new</span> FileNode(<span class="string">""</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">ls</span><span class="params">(String path)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> findNode(path).getList();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">mkdir</span><span class="params">(String path)</span> </span>&#123;</span><br><span class="line">        findNode(path);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addContentToFile</span><span class="params">(String filePath, String content)</span> </span>&#123;</span><br><span class="line">        findNode(filePath).addContent(content);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">readContentFromFile</span><span class="params">(String filePath)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> findNode(filePath).getContent();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//-- private method section --//</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> FileNode <span class="title">findNode</span><span class="params">(String path)</span></span>&#123;</span><br><span class="line">        String[] files = path.split(<span class="string">"/"</span>);</span><br><span class="line"></span><br><span class="line">        FileNode cur = root;</span><br><span class="line">        <span class="keyword">for</span>(String file : files)&#123;</span><br><span class="line">            <span class="keyword">if</span>(file.length() == <span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line">            cur.children.putIfAbsent(file, <span class="keyword">new</span> FileNode(file));</span><br><span class="line">            cur = cur.children.get(file);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(cur.isFile()) <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> cur;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// Private class</span></span><br><span class="line">   <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">FileNode</span></span>&#123;</span><br><span class="line">        <span class="keyword">private</span> TreeMap&lt;String, FileNode&gt; children;</span><br><span class="line">        <span class="keyword">private</span> StringBuilder file;</span><br><span class="line">        <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">FileNode</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">            children = <span class="keyword">new</span> TreeMap&lt;&gt;();</span><br><span class="line">            file = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">            <span class="keyword">this</span>.name = name;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">getContent</span><span class="params">()</span></span>&#123;</span><br><span class="line">            <span class="keyword">return</span> file.toString();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span></span>&#123;</span><br><span class="line">            <span class="keyword">return</span> name;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addContent</span><span class="params">(String content)</span></span>&#123;</span><br><span class="line">            file.append(content);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isFile</span><span class="params">()</span></span>&#123;</span><br><span class="line">            <span class="keyword">return</span> file.length() &gt; <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">getList</span><span class="params">()</span></span>&#123;</span><br><span class="line">            List&lt;String&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">            <span class="keyword">if</span>(isFile())&#123;</span><br><span class="line">                list.add(getName());</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                list.addAll(children.keySet());</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> list;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="OOP-Object-Oriented-Programming"><a href="#OOP-Object-Oriented-Programming" class="headerlink" title="OOP : Object-Oriented Programming"></a>OOP : Object-Oriented Programming</h1><p>什么是对象Object? 万物皆对象</p>
<p>对象的属性和行为</p>
<p>什么是类Class？类是对象的蓝图</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在Java中，类是对现实对象的抽象</span></span><br><span class="line">Class Student &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> score;</span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//用类创建对象</span></span><br><span class="line"><span class="comment">//什么是实例instance</span></span><br><span class="line"><span class="comment">//实例就是对象, s1是Student类的一个对象/实例</span></span><br><span class="line">Student s1 = <span class="keyword">new</span> Student();</span><br></pre></td></tr></table></figure>

<p>什么是OOP?</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//用对象构建程序</span></span><br><span class="line">Class Dog &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">speak</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out,println(<span class="string">"Brak!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">Class Cat &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">speak</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out,println(<span class="string">"Meow~"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> CLass Main &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Dog d1 = <span class="keyword">new</span> Dog();</span><br><span class="line">        d1.speak();</span><br><span class="line">        Cat c1 = <span class="keyword">new</span> Cat();</span><br><span class="line">        c1.speak();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Class的命名</p>
<ol>
<li><strong>首字母大写UpperCamelCase</strong> </li>
<li>eg.MyClass</li>
</ol>
<p>成员变量</p>
<ol>
<li>又叫域field</li>
<li>表示对象的属性</li>
<li>命名规则和变量名相同</li>
</ol>
<p>成员函数member function</p>
<ol>
<li>又叫方法method</li>
<li>表示对象的行为</li>
<li>命名时，第一个但从必须是动词</li>
</ol>
<p>构造函数Constructor</p>
<ol>
<li>default constructor</li>
<li>parameterized constructor</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//default constructor</span></span><br><span class="line">Class Node &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> val;</span><br><span class="line">    <span class="keyword">public</span> Node next;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//equal to   </span></span><br><span class="line">Class Node &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> val;</span><br><span class="line">    <span class="keyword">public</span> Node next;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Node</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//parameterized constructor</span></span><br><span class="line">Class Node &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> val;</span><br><span class="line">    <span class="keyword">public</span> Node next;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Node</span><span class="params">(<span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.val = value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span>-可以在对象外部被访问</span><br><span class="line"><span class="keyword">private</span>-只能在对象内部被访问</span><br><span class="line"><span class="keyword">static</span>-静态，表示field或method不属于对象， 所有这个类的对象共享这个对象或方法</span><br><span class="line">    </span><br><span class="line">Class Student &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> score;</span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getScore</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> score;  <span class="comment">//this is allowed</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(score);  <span class="comment">//this is not allowed</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//如果一个方法或属性static， 那么它不再属于所在的对象。所以在static方法中， 访问对象的属性是不允许的</span></span><br></pre></td></tr></table></figure>

<h1 id="OOD-1"><a href="#OOD-1" class="headerlink" title="OOD"></a>OOD</h1><h2 id="OOA-vs-OOD-vs-OOP"><a href="#OOA-vs-OOD-vs-OOP" class="headerlink" title="OOA vs. OOD vs. OOP"></a>OOA vs. OOD vs. OOP</h2><p>基本代表了面试的三个流程步骤：</p>
<ol>
<li><p>OOA (Analyze) : 面向对象分析</p>
</li>
<li><p>OOD(Design) : 面向对象设计</p>
</li>
<li><p>OOP(Programming) : 面向对象编程</p>
</li>
</ol>
<p>出题问法</p>
<ul>
<li>Can you design an elevator system? (设计一个完整的系统) • Little amount of coding </li>
<li>Can you design scheduler for elevator system? (设计系统中的一个部分) • Need implementation</li>
</ul>
<p>OOD在面试当中很重要 - 尤其对于Intern和Entry level </p>
<p>题目没有标准答案 - Everything is an object</p>
<h2 id="OOD面试中的陷阱"><a href="#OOD面试中的陷阱" class="headerlink" title="OOD面试中的陷阱"></a>OOD面试中的陷阱</h2><h3 id="起手式的陷阱"><a href="#起手式的陷阱" class="headerlink" title="起手式的陷阱"></a>起手式的陷阱</h3><h4 id="先下手为强"><a href="#先下手为强" class="headerlink" title="先下手为强"></a>先下手为强</h4><p>例子: Okay, for a parking lot, we need multiple levels. Also let’s make it able to park bicycles. </p>
<p>忌：自说自话，侃侃而谈 </p>
<p>宜：先通过和面试官的交流获得有效信息，留下一个好的feedback，有一个好的交流</p>
<p>面试官是甲方，不要Assume太多自顾自谈，一万个面试官心中想的是一万个电梯系统，要根据对方的需求确定有效信息进而设计</p>
<h4 id="指鹿为马"><a href="#指鹿为马" class="headerlink" title="指鹿为马"></a>指鹿为马</h4><p>例子: Let’s say you need to support 5000 people to park in this parking lot, morning and night will be your peak hour… I can try to use this algorithm/data structure to find the closest spot. </p>
<p>忌：Algorithm, OOD, System design 傻傻分不清楚是哪类题，是算法还是OOD还是System Design </p>
<p>宜：询问清楚题目要求</p>
<p>可以直接问你希望我implement一个算法来支持parking lot里的某一个feature？/设计一个parking lot？/还是一个System可以handle不同时期的traffic？</p>
<h3 id="解题中的陷阱"><a href="#解题中的陷阱" class="headerlink" title="解题中的陷阱"></a>解题中的陷阱</h3><h4 id="朝出夕改"><a href="#朝出夕改" class="headerlink" title="朝出夕改"></a>朝出夕改</h4><p>例子: Oh, wait a second, I think I can optimize the process by modifying/removing this class </p>
<p>忌：思路混乱，反复修改 </p>
<p>宜：先给面试官呈现一个Viable的成果</p>
<p>建议先把解法写好，即便是brute force不是很巧妙也没问题，先完整写出一个解法再去慢慢修改。</p>
<h3 id="收手式的陷阱"><a href="#收手式的陷阱" class="headerlink" title="收手式的陷阱"></a>收手式的陷阱</h3><h4 id="虎头蛇尾"><a href="#虎头蛇尾" class="headerlink" title="虎头蛇尾"></a>虎头蛇尾</h4><p>忌：虎头蛇尾，功亏一篑 </p>
<p>宜：检查你的设计，是否能够支持所需的功能，考虑test case</p>
<h2 id="如何评判一轮OOD面试"><a href="#如何评判一轮OOD面试" class="headerlink" title="如何评判一轮OOD面试"></a>如何评判一轮OOD面试</h2><h3 id="S-O-L-I-D原则"><a href="#S-O-L-I-D原则" class="headerlink" title="S.O.L.I.D原则"></a>S.O.L.I.D原则</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">• S – Single responsibility principle</span><br><span class="line">• O – Open close principle</span><br><span class="line">• L – Liskov substitution principle</span><br><span class="line">• I – Interface segregation principle</span><br><span class="line">• D – Dependency inversion principle</span><br></pre></td></tr></table></figure>

<h3 id="S"><a href="#S" class="headerlink" title="S."></a>S.</h3><p>Single responsibility principle 单一责任原则 </p>
<p>一个类应该有且只有一个去改变他的理由，这意味着一个类应该只有一项工作。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//违反了S原则，只应该负责计算Area，而不用另外print出来</span></span><br><span class="line"><span class="comment">//因为未来如果需要基于不同精度print Area的时候(不同的print需求的时候)，会需要反复修改code</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AreaCalculator</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">float</span> <span class="title">calculateArea</span><span class="params">(Shape s)</span> </span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> String printAreaAccruateToOneDecimalPlace &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//-&gt; 好的做法,不同功能拆分成两个类</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AreaCalculator</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">float</span> result;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getResult</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.result;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">float</span> <span class="title">calculateArea</span><span class="params">(Shape s)</span> </span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Printer</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">print</span><span class="params">(AreaCalculator ac)</span> </span>&#123;</span><br><span class="line">        System.out.println(ac.getResult());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="O"><a href="#O" class="headerlink" title="O."></a>O.</h3><p>Open close principle 开放封闭原则</p>
<p>对象或实体应该对扩展开放，对修改封闭 (Open to extension, close to modification)。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//违反了O原则，未来扩展有圆形五边形的时候需要不断修改code</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AreaCalculator</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">float</span> <span class="title">calculateArea</span><span class="params">(Triangle t)</span> </span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">float</span> <span class="title">calculateArea</span><span class="params">(Rectangle r)</span> </span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//-&gt; 好的做法,abstract, 将来有扩展的时候，AreaCalculator不需要修改</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AreaCalculator</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">float</span> <span class="title">calculateArea</span><span class="params">(Shape s)</span> </span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="L"><a href="#L" class="headerlink" title="L."></a>L.</h3><p>Liskov substitution principle 里氏替换原则</p>
<p>任何一个子类或派生类应该可以替换它们的基类或父类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">abstract</span> <span class="keyword">public</span> <span class="keyword">float</span> <span class="title">calculateVolumn</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">abstract</span> <span class="keyword">public</span> <span class="keyword">float</span> <span class="title">calculateArea</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//矩形子类 -&gt; 违反了L原则， 矩形不能够计算体积，不能替换父类</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Rectangle</span> <span class="keyword">extends</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">    <span class="comment">//..</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//正方体子类</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Cube</span> <span class="keyword">extends</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">    <span class="comment">//..</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="I"><a href="#I" class="headerlink" title="I."></a>I.</h3><p>Interface segregation principle 接口分离原则</p>
<p>不应该强迫一个类实现它用不上的接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">abstract</span> <span class="keyword">public</span> <span class="keyword">float</span> <span class="title">calculateVolumn</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">abstract</span> <span class="keyword">public</span> <span class="keyword">float</span> <span class="title">calculateArea</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//矩形子类 -&gt; 违反了I原则，我们强迫Rectangle去实现了calculateVolumn接口，违反了但是code还是work的，编译不会出问题，但是面试的时候这样会违反设计原则，面试扣分</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Rectangle</span> <span class="keyword">implements</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">    <span class="comment">//..</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//正方体子类</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Cube</span> <span class="keyword">extends</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">    <span class="comment">//..</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="D"><a href="#D" class="headerlink" title="D"></a>D</h3><p>Dependency inversion principle 依赖反转原则 </p>
<p>抽象不应该依赖于具体实现，具体实现应该依赖于抽象</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AreaCalculator</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">float</span> result;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getResult</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.result;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">float</span> <span class="title">calculateArea</span><span class="params">(Shape s)</span> </span>&#123;  <span class="comment">//input是一个shape</span></span><br><span class="line">        <span class="keyword">if</span> (s == Triangle) &#123;  <span class="comment">//依赖于具体的code进行计算if Triangle else Rectangle</span></span><br><span class="line">            <span class="keyword">this</span>.result = b * h / <span class="number">2</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s == Rectangle) &#123;</span><br><span class="line">            <span class="keyword">this</span>.result = l * w;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//如果出现了圆形需要重复修改</span></span><br><span class="line"><span class="comment">//上面虽然满足了Open close但是基于D原则</span></span><br><span class="line"><span class="comment">//-&gt; 好的做法</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//Interface,具有计算Area的功能， interface并不能直接使用， 下面的class才是真正调用解决问题的部分</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Shape</span> </span>&#123;  <span class="comment">//接口是一个抽象的class</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getArea</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Triangle</span> <span class="keyword">implements</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getArea</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> b * h / <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AreaCalculator</span> </span>&#123;  <span class="comment">//依赖于抽象接口</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">float</span> result;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getResult</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.result;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">float</span> <span class="title">calculateArea</span><span class="params">(Shape s)</span> </span>&#123; </span><br><span class="line">        <span class="keyword">this</span>.result = s.getArea();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//如果我们未来有新的形状如圆形，可以写一个Circle implements Shape这个interface</span></span><br></pre></td></tr></table></figure>

<p>Abstract Class-Interface的区别(java的概念)</p>
<p>可以当成一个父类Abstract Class，对以一个子类只能拥有一个父类，extends一个之后不能重复extends</p>
<p>如果是interface可以同时implements很多接口</p>
<h2 id="面试中应该怎么做？"><a href="#面试中应该怎么做？" class="headerlink" title="面试中应该怎么做？"></a>面试中应该怎么做？</h2><p>Can you design an elevator system for this building?</p>
<h3 id="奔雷手-5C解题法"><a href="#奔雷手-5C解题法" class="headerlink" title="奔雷手 - 5C解题法"></a>奔雷手 - 5C解题法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">• Clarify</span><br><span class="line">• Core objects</span><br><span class="line">• Cases</span><br><span class="line">• Classes</span><br><span class="line">• Correctness</span><br></pre></td></tr></table></figure>

<h3 id="Clarify"><a href="#Clarify" class="headerlink" title="Clarify"></a>Clarify</h3><p>说人话：通过和面试官交流，去除题目中的歧义，确定答题范围 </p>
<p>Example: Glass of water ?</p>
<p>清楚歧义，确定对方意图与需求。</p>
<ul>
<li>What</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>. 针对题目中的关键字来提问，帮助自己更好的确定答题范围。 大多数的关键字为名词，通过名词的属性来考虑</span><br><span class="line"><span class="number">2</span>. Evaluator， Building？</span><br><span class="line"><span class="number">3</span>. 关键字<span class="number">1</span>：Elevator</span><br><span class="line">属性？</span><br><span class="line">可能需要考虑获取每辆电梯的目前承载重量，size?关门的时候检查有没有超重</span><br><span class="line">是否需要设计两种类，如果需要它们之间是什么关系？</span><br><span class="line">- 客梯和货梯有什么区别？一个类客梯Atrstairs 货梯GoodsElevator</span><br><span class="line">针对本题：所有电梯厢均为相同规格</span><br><span class="line"></span><br><span class="line">关键字<span class="number">2</span>：Building</span><br><span class="line">属性？</span><br><span class="line">楼有多大/楼有多高/楼内能容纳多少人？</span><br><span class="line">- 通用属性，对于题目帮助不大</span><br><span class="line"></span><br><span class="line">是否有多处能搭乘的电梯口？</span><br><span class="line">- 当收到一个搭乘电梯的请求时，有多少电梯能够响应？</span><br><span class="line">- 左边<span class="number">5</span>台响应request 右边<span class="number">5</span>台响应request</span><br><span class="line">针对本题：每层仅一处能搭乘，所有电梯均可响应</span><br></pre></td></tr></table></figure>

<ul>
<li>How</li>
</ul>
<p>针对问题主题的规则来提问，帮助自己明确解题方向。 </p>
<p>*此类问题没有标准答案，你可以描出一些解决方法，通过面试官的反应， 选择一个你比较有信心（简单）的方案</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">电梯有哪些规则？</span><br><span class="line">当按下按钮时，哪一台电梯会相应？</span><br><span class="line">可以先提几个方案，选一个自己觉得做起来最简单的方法跟面试官讨论</span><br><span class="line">- 优先级：同方向 &gt; 静止 &gt; 反向</span><br><span class="line">- 一半负责奇数楼层，一半负责偶数楼层</span><br><span class="line">- …</span><br><span class="line"></span><br><span class="line">当电梯在运行时，哪些按键可以响应？</span><br><span class="line">- 是否能按下反向的楼层</span><br><span class="line"></span><br><span class="line">规则：</span><br><span class="line">对于本题：同向 &gt; 静止 &gt; 反向，当运行时不能按下反向的楼层</span><br><span class="line">信息：电梯至少需要三种状态，并且要知道当前在哪一层</span><br></pre></td></tr></table></figure>

<ul>
<li>Who</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">设计由人主导 VS. 设计由系统主导？</span><br><span class="line">Optional, 通过思考题目当中是否有人的出现，来帮助确定解题范围</span><br><span class="line">*一般可以考虑人的角色以及人的属性，看是否题目需要</span><br><span class="line">最主要问清楚what和how里的问题，who可以视情况忽略，我们尽量希望淡化人在系统里的影响</span><br><span class="line"></span><br><span class="line">电梯系统如何获取每位乘客的</span><br><span class="line">重量？</span><br><span class="line">- Passenger class包含重量</span><br><span class="line">- 电梯能够自动感应当前重量</span><br><span class="line">对于本题：电梯能够自动获取当前重量，增加一个function获取重量</span><br></pre></td></tr></table></figure>

<h3 id="Core-objects"><a href="#Core-objects" class="headerlink" title="Core objects"></a>Core objects</h3><p>说人话：确定题目所涉及的类，以及类之间的映射关系 </p>
<p>什么是Core Object 为了完成设计，需要哪些类？</p>
<p>为什么要定义Core Object ? </p>
<ul>
<li>这是和面试官初步的纸面contract </li>
<li>承上启下，来自于Clarify的结果，成为Use case的依据 </li>
<li>为画类图打下基础</li>
</ul>
<p>如何定义Core Object ? </p>
<ul>
<li>以一个Object作为基础，线性思考 ,ElevatorSystem</li>
<li>确定Objects之间的映射关系</li>
<li>考虑input，output </li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Request-&gt;ElevatorSystem(- List&lt;Elevator&gt; elevators)-&gt;Elevator-&gt;ElevatorButton</span><br></pre></td></tr></table></figure>

<h3 id="Good-Practice1-Access-modifier"><a href="#Good-Practice1-Access-modifier" class="headerlink" title="Good Practice1 - Access modifier"></a>Good Practice1 - Access modifier</h3><p>Access modifier </p>
<ul>
<li>package </li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span></span><br><span class="line">如果什么都不声明，变量和函数都是<span class="keyword">package</span> level visible的，在同一个<span class="keyword">package</span>内的其他类都可以访问</span><br><span class="line"></span><br><span class="line">Example:</span><br><span class="line">String input = <span class="string">"test"</span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printInput</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	System.out.println(input);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//在类图中，避免使用default的package level access</span></span><br><span class="line"><span class="comment">//建议不要再ood里使用package access modifier</span></span><br></pre></td></tr></table></figure>

<ul>
<li>public </li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span></span><br><span class="line">如果声明为<span class="keyword">public</span>，变量和函数都是<span class="keyword">public</span> level visible的，任何其他的类都可以访问</span><br><span class="line"></span><br><span class="line">Example:</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">	<span class="comment">//..</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//在类图中，用”+”表示一个变量或者函数为public</span></span><br></pre></td></tr></table></figure>

<ul>
<li>private </li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span></span><br><span class="line">如果声明为<span class="keyword">private</span>，变量和函数都是<span class="class"><span class="keyword">class</span> <span class="title">level</span> <span class="title">visible</span>的，这是所有<span class="title">access</span> <span class="title">modifier</span>中限制最</span></span><br><span class="line"><span class="class">多的一个。仅有定义这些变量和函数的类自己可以访问。</span></span><br><span class="line"><span class="class"><span class="title">private</span>也是<span class="title">OOD</span>当中实现封装的重要手段</span></span><br><span class="line"><span class="class"></span></span><br><span class="line">Example:</span><br><span class="line"><span class="function"><span class="keyword">private</span> class <span class="title">AreaCalculator</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Logger log;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//在类图中，用”-”表示一个变量或者函数为private</span></span><br></pre></td></tr></table></figure>

<ul>
<li>protected</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span></span><br><span class="line">如果声明为<span class="keyword">protected</span>，变量和函数在能被定义他们的类访问的基础上，还能够被该类的子类</span><br><span class="line">所访问。</span><br><span class="line"><span class="keyword">protected</span>也是OOD当中实现继承的重要手段。</span><br><span class="line">Example:</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AudioPlayer</span> </span>&#123;</span><br><span class="line">	<span class="keyword">protected</span> Speaker speaker;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StreamingAudioPlayer</span> <span class="keyword">extends</span> <span class="title">AudioPlayer</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">openSperker</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		speaker.open();  <span class="comment">//可以使用父类的.open()</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//在类图中，用”#”表示一个变量或者函数为protected</span></span><br></pre></td></tr></table></figure>

<h3 id="Cases"><a href="#Cases" class="headerlink" title="Cases"></a>Cases</h3><p>说人话：确定题目中所需要实现的场景和功能 </p>
<p>为什么要写Use cases ? </p>
<p>这是你和面试官白纸黑字达成的第二份共识，把你将要实现的功能列在白板上 </p>
<p>帮助你在解题过程中，理清条例，一个一个Case实现 </p>
<p>作为检查的标准</p>
<p>怎么写Use cases ? </p>
<p>利用定义的Core Object, 列举出每个Object对应产生的use case. </p>
<p>每个use case只需要先用一句简单的话来描述即可</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//use cases</span></span><br><span class="line"><span class="comment">//分成一个个core Object来找use case</span></span><br><span class="line"><span class="comment">//可以写完问问面试官，有没有哪些我没想到的</span></span><br><span class="line"><span class="comment">//把类图画出来设计基本上就完成了</span></span><br><span class="line"><span class="comment">//如果45min面试，你30min就把类图画完了，那么面试官可能胡让你实现里面某个feature</span></span><br><span class="line">Elevator</span><br><span class="line">- Take external request</span><br><span class="line">- Take internal request</span><br><span class="line">- Open gate</span><br><span class="line">- Close gate</span><br><span class="line">- Check weight</span><br><span class="line"></span><br><span class="line">ElevatorButton</span><br><span class="line">- Press button</span><br></pre></td></tr></table></figure>

<h3 id="Classes"><a href="#Classes" class="headerlink" title="Classes"></a>Classes</h3><p>说人话：通过类图的方式，具体填充题目中涉及的类 </p>
<p>Class diagram (类图)</p>
<table>
<thead>
<tr>
<th>Class Name</th>
</tr>
</thead>
<tbody><tr>
<td>Attributes</td>
</tr>
<tr>
<td>Functions</td>
</tr>
</tbody></table>
<p>为什么要画类图？ </p>
<p>可交付，Minimal Viable Product, 可以上交给別的考官看</p>
<p>节省时间，不容易在Coding上挣扎 </p>
<p>建立在Use case上，和之前的步骤层层递进，条例清晰，便于交流和修改</p>
<p>如果时间允许/面试官要求，便于转化成Code</p>
<p>怎么画类图？ </p>
<p>遍历你所列出的use cases - 对于每一个use case，更加详细的描述这个use case在做什么事情,填充到Object里 （例如：take external request -&gt; ElevatorSystem takes an external request, and decide to push this request to an appropriate elevator）</p>
<p>针对这个描述，在已有的Core objects里填充进所需要的信息</p>
<p>Use case: Handle request </p>
<p><strong>ElevatorSystem</strong> takes an <strong>external request</strong>, and decide to push this request to an appropriate <strong>elevator</strong></p>
<h3 id="Good-practice2-Exception"><a href="#Good-practice2-Exception" class="headerlink" title="Good practice2  - Exception"></a>Good practice2  - Exception</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Good practice</span><br><span class="line">如何知道一个函数，是否成功完成任务？</span><br><span class="line">-  Use <span class="keyword">boolean</span> instead of <span class="keyword">void</span> 成功的话返回<span class="keyword">true</span>, 否则返回<span class="keyword">false</span></span><br><span class="line"></span><br><span class="line">如何知道是什么地方出错？</span><br><span class="line">- Use exceptions  eg. InvalidExternalRequestException</span><br></pre></td></tr></table></figure>



<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">Challenge</span><br><span class="line"></span><br><span class="line">如果电梯目前在1L，有人按下了5L向上，之后又有人按下了3L向上， 电梯会怎样行动？ </span><br><span class="line"></span><br><span class="line">stops will be &#123;5,3&#125; Expected is: &#123;3,5&#125; </span><br><span class="line"></span><br><span class="line">Solution1: sort stops every time we add to it.</span><br><span class="line"></span><br><span class="line">Solution2: use priority queue instead of list</span><br><span class="line"></span><br><span class="line">如果电梯目前在1L，有人按下了5L向上，之后又有人按下了3L向上，</span><br><span class="line">紧接着这台电梯又被分配了一个2L向下的request。这台电梯会如何行</span><br><span class="line">动？</span><br><span class="line">stops will be &#123;2，3，5&#125;</span><br><span class="line">Expected is: &#123;3，5，2&#125;</span><br><span class="line">Solution: keep 2 lists for different direction</span><br><span class="line"></span><br><span class="line">如何判断一个Internal request 是否为Valid?</span><br><span class="line">Solution:</span><br><span class="line">If elevator going up</span><br><span class="line">requested level lower than current level</span><br><span class="line">invalid</span><br><span class="line">If elevator going down</span><br><span class="line">requested level higher than current level</span><br><span class="line">invalid</span><br></pre></td></tr></table></figure>

<p>Use case: Take external request </p>
<p>An elevator takes an external request, inserts in its stop list.</p>
<p>Use case: Open gate </p>
<p>An elevator reaches the destination level, open gate</p>
<p>Use case: Close gate </p>
<p>An elevator checks if overweight; close the door; then check stops corresponds to current status; if no stops left, check the reserve direction stops; change status to reserve direction or idle.</p>
<p>Use case: check weight </p>
<p>An elevator checks its current weight and compare with limit to see if overweight</p>
<p>Use case: press button </p>
<p>A button inside elevator is pressed, will generate an internal request and send to the elevator.</p>
<p>类图，先写出Core Object，列出Use cases</p>
<p>然后按照，Use cases根据自己的节奏完善类图，class 里的各种function</p>
<h3 id="Correctness"><a href="#Correctness" class="headerlink" title="Correctness"></a>Correctness</h3><p>说人话：检查自己的设计，是否满足关键点</p>
<p>从以下几方面检查： </p>
<ol>
<li><p>Validate use cases (检查是否支持所有的use case) </p>
</li>
<li><p>Follow good practice (面试当中的加分项，展现一个程序员的经验)  </p>
</li>
<li><p>S.O.L.I.D </p>
</li>
<li><p>Design pattern</p>
</li>
</ol>
<h3 id="Good-Practice-继承"><a href="#Good-Practice-继承" class="headerlink" title="Good Practice  - 继承"></a>Good Practice  - 继承</h3><p>继承 检查你的设计中，是否有重复的类，可以采用继承的方式来表现</p>
<p>Challenge</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">How <span class="keyword">do</span> you handle an external request?</span><br><span class="line">• What <span class="keyword">if</span> I want to apply different ways to handle external requests</span><br><span class="line">during different time of a day?</span><br><span class="line">• Can you implement it in code?</span><br><span class="line"></span><br><span class="line">How <span class="keyword">do</span> you handle an external request?</span><br><span class="line">如我们最早和面试官讨论的结果：</span><br><span class="line">同方向 &gt; 静止 &gt; 反向</span><br><span class="line"></span><br><span class="line">What <span class="keyword">if</span> I want to apply different ways to handle external requests</span><br><span class="line">during different time of a day?</span><br><span class="line">• Solution <span class="number">1</span>: <span class="keyword">if</span> - <span class="keyword">else</span> -&gt; 违反了O原则</span><br><span class="line">更好的做法：Solution <span class="number">2</span>: Strategy design pattern</span><br></pre></td></tr></table></figure>


    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/200/" rel="tag"># 200</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/11/15/AlgoTogether/" rel="prev" title="AlgoTogether & Interview.io">
      <i class="fa fa-chevron-left"></i> AlgoTogether & Interview.io
    </a></div>
      <div class="post-nav-item"></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#OOD"><span class="nav-number">1.</span> <span class="nav-text">OOD</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#353-Design-Snake-Game✨"><span class="nav-number">1.1.</span> <span class="nav-text">353. Design Snake Game✨</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Solution1"><span class="nav-number">1.1.1.</span> <span class="nav-text">Solution1:</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Unsolved-348-Design-Tic-Tac-Toe⭐"><span class="nav-number">1.2.</span> <span class="nav-text">Unsolved 348. Design Tic-Tac-Toe⭐</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Solution0"><span class="nav-number">1.2.1.</span> <span class="nav-text">Solution0:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Solution1-1"><span class="nav-number">1.2.2.</span> <span class="nav-text">Solution1:</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Unsolved-LRU-Cache-AE-⭐"><span class="nav-number">1.3.</span> <span class="nav-text">Unsolved LRU Cache(AE)⭐</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Solution1-2"><span class="nav-number">1.3.1.</span> <span class="nav-text">Solution1:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#146-LRU-Cache✨"><span class="nav-number">1.3.2.</span> <span class="nav-text">146. LRU Cache✨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Solution1-3"><span class="nav-number">1.3.3.</span> <span class="nav-text">Solution1:</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Unsolved-460-LFU-Cache⭐"><span class="nav-number">1.4.</span> <span class="nav-text">Unsolved 460. LFU Cache⭐</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Unsolved-706-Design-HashMap✨"><span class="nav-number">1.5.</span> <span class="nav-text">Unsolved 706. Design HashMap✨</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Solution1-4"><span class="nav-number">1.5.1.</span> <span class="nav-text">Solution1:</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#380-Insert-Delete-GetRandom-O-1-⭐"><span class="nav-number">1.6.</span> <span class="nav-text">380. Insert Delete GetRandom O(1)⭐</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Solution1-5"><span class="nav-number">1.6.1.</span> <span class="nav-text">Solution1:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Randomlization"><span class="nav-number">1.6.2.</span> <span class="nav-text">Randomlization</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Unsolved-519-Random-Flip-Matrix🎂"><span class="nav-number">1.6.3.</span> <span class="nav-text">Unsolved 519. Random Flip Matrix🎂</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Solution1-6"><span class="nav-number">1.6.4.</span> <span class="nav-text">Solution1:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#382-Linked-List-Random-Node✨"><span class="nav-number">1.6.5.</span> <span class="nav-text">382. Linked List Random Node✨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Solution1-7"><span class="nav-number">1.6.6.</span> <span class="nav-text">Solution1:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Solution2"><span class="nav-number">1.6.7.</span> <span class="nav-text">Solution2:</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#588-Design-In-Memory-File-System⭐"><span class="nav-number">1.7.</span> <span class="nav-text">588. Design In-Memory File System⭐</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Solution1-8"><span class="nav-number">1.7.1.</span> <span class="nav-text">Solution1:</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#OOP-Object-Oriented-Programming"><span class="nav-number">2.</span> <span class="nav-text">OOP : Object-Oriented Programming</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#OOD-1"><span class="nav-number">3.</span> <span class="nav-text">OOD</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#OOA-vs-OOD-vs-OOP"><span class="nav-number">3.1.</span> <span class="nav-text">OOA vs. OOD vs. OOP</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#OOD面试中的陷阱"><span class="nav-number">3.2.</span> <span class="nav-text">OOD面试中的陷阱</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#起手式的陷阱"><span class="nav-number">3.2.1.</span> <span class="nav-text">起手式的陷阱</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#先下手为强"><span class="nav-number">3.2.1.1.</span> <span class="nav-text">先下手为强</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#指鹿为马"><span class="nav-number">3.2.1.2.</span> <span class="nav-text">指鹿为马</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#解题中的陷阱"><span class="nav-number">3.2.2.</span> <span class="nav-text">解题中的陷阱</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#朝出夕改"><span class="nav-number">3.2.2.1.</span> <span class="nav-text">朝出夕改</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#收手式的陷阱"><span class="nav-number">3.2.3.</span> <span class="nav-text">收手式的陷阱</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#虎头蛇尾"><span class="nav-number">3.2.3.1.</span> <span class="nav-text">虎头蛇尾</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#如何评判一轮OOD面试"><span class="nav-number">3.3.</span> <span class="nav-text">如何评判一轮OOD面试</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#S-O-L-I-D原则"><span class="nav-number">3.3.1.</span> <span class="nav-text">S.O.L.I.D原则</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#S"><span class="nav-number">3.3.2.</span> <span class="nav-text">S.</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#O"><span class="nav-number">3.3.3.</span> <span class="nav-text">O.</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#L"><span class="nav-number">3.3.4.</span> <span class="nav-text">L.</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#I"><span class="nav-number">3.3.5.</span> <span class="nav-text">I.</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#D"><span class="nav-number">3.3.6.</span> <span class="nav-text">D</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#面试中应该怎么做？"><span class="nav-number">3.4.</span> <span class="nav-text">面试中应该怎么做？</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#奔雷手-5C解题法"><span class="nav-number">3.4.1.</span> <span class="nav-text">奔雷手 - 5C解题法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Clarify"><span class="nav-number">3.4.2.</span> <span class="nav-text">Clarify</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Core-objects"><span class="nav-number">3.4.3.</span> <span class="nav-text">Core objects</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Good-Practice1-Access-modifier"><span class="nav-number">3.4.4.</span> <span class="nav-text">Good Practice1 - Access modifier</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Cases"><span class="nav-number">3.4.5.</span> <span class="nav-text">Cases</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Classes"><span class="nav-number">3.4.6.</span> <span class="nav-text">Classes</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Good-practice2-Exception"><span class="nav-number">3.4.7.</span> <span class="nav-text">Good practice2  - Exception</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Correctness"><span class="nav-number">3.4.8.</span> <span class="nav-text">Correctness</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Good-Practice-继承"><span class="nav-number">3.4.9.</span> <span class="nav-text">Good Practice  - 继承</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Dejavu"
      src="/images/v2-f8df7dc974a522b119a385a0fc09311e_xll.jpg">
  <p class="site-author-name" itemprop="name">Dejavu</p>
  <div class="site-description" itemprop="description">Stay gold</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">72</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/Dejavu-19" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Dejavu-19" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="/liu.kunling19@gmail.com" title="E-Mail → liu.kunling19@gmail.com"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2019 – 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Dejavu</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>

<script src="/js/bookmark.js"></script>


  <script defer src="/lib/three/three.min.js"></script>
    <script defer src="/lib/three/three-waves.min.js"></script>
    <script defer src="/lib/three/canvas_lines.min.js"></script>


  















  

  

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"right","width":200,"height":400},"mobile":{"show":false},"log":false});</script></body>
</html>
